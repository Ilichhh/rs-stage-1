!function(){var t={668:function(t){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"></path></svg>'},750:function(t){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>'}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t}(),function(){"use strict";n.p;var t=n(750),e=n.n(t),s=n(668),o=n.n(s);console.log("Сделал весь функционал, заморочился с драг-н-дропом, вроде все заработало как надо.\nДизайн еще буду допиливать скорее всего, много чего мне не нравится. Но в принципе можно проверять)"),window.addEventListener("DOMContentLoaded",(()=>{const t=new Audio("./assets/zapsplat_foley_brick_or_tile_scrape_on_concrete_001_70840.mp3"),n=[9,16,25,36,49,64],s=[];let r=[];const a={},c={};let i,l,u={countItems:16,seconds:0,minutes:0,moves:0},d=[],v=!1,m=null,p=!0;document.body.innerHTML=`\n    <main class="container">\n      <h1 class="header">Gem Puzzle</h1>\n      <button class="button sound-button">${e()}</button>\n      <div class="buttons-wrapper">\n        <button class="button save">SAVE</button>\n        <button class="button load">LOAD</button>\n        <button class="button show-results">RESULTS</button>\n      </div>\n      <div class="stats-wrapper">\n        <span class="time">00:00</span>\n        <span class="moves">Moves: ${u.moves}</span>\n      </div>\n      <div class="results">\n        <div class="results__table">\n          <div class="results__header">\n            <div>Position</div>\n            <div>Time</div>\n            <div>Moves</div>\n          </div>\n          <div class="results__stats"></div>\n        </div>\n      </div>\n      <div class="field"></div>\n      <div class="size-wrapper"></div>\n      <button class="button shuffle">NEW GAME</button>\n    </main>\n  `;const f=document.querySelector(".field"),g=document.querySelector(".shuffle"),h=document.querySelector(".save"),y=document.querySelector(".load"),S=document.querySelector(".show-results"),L=document.querySelector(".sound-button"),b=(document.querySelector(".stats-wrapper"),document.querySelector(".results")),$=document.querySelector(".moves"),M=document.querySelector(".time"),w=document.querySelector(".size-wrapper"),x=document.querySelector(".results__stats");function _(t){s.length=0;for(let e=1;e<=t;e++)s.push(e);f.innerHTML="",s.forEach((t=>{f.innerHTML+=`\n        <button class="piece" data-piece-id="${t}">${t}</button>\n      `}))}function I(){const t=document.querySelector(".size-wrapper");t.innerHTML="",n.forEach((e=>{t.innerHTML+=`\n        <label class="size">\n          <input type="radio" name="size" value="${e}"${e===u.countItems?" checked":""}>${Math.sqrt(e)}x${Math.sqrt(e)}\n        </label>\n      `}))}function q(){for(let t=0;t<r.length;t++)for(let e=0;e<r[t].length;e++){const n=document.querySelectorAll(".piece")[r[t][e]-1];n.style.transform=`translate(${100*e}%, ${100*t}%)`,n.style.width=`calc(100% / ${r[t].length})`,n.style.height=`calc(100% / ${r.length})`}}function E(t){for(let e=0;e<r.length;e++)for(let n=0;n<r[e].length;n++)r[e][n]===t&&(a.x=n,a.y=e),r[e][n]===s.length&&(c.x=n,c.y=e);a.x>c.x&&(i="left"),a.x<c.x&&(i="right"),a.y>c.y&&(i="up"),a.y<c.y&&(i="down");const e=Math.abs(c.x-a.x),n=Math.abs(c.y-a.y);return c.x===a.x&&1===n||c.y===a.y&&1===e}function z(){x.innerHTML="";for(let t=0;t<10;t++){let e;d[t]&&(e=`${d[t].min.toString().padStart(2,0)}:${d[t].sec.toString().padStart(2,0)}`),x.innerHTML+=`\n        <div class="results__values">\n          <div>${t+1}</div>\n          <div>${d[t]?e:"..."}</div>\n          <div>${d[t]?d[t].moves:"..."}</div>\n        </div>\n      `}}function H(t){const e=s.filter((t=>E(t)));t[e[Math.floor(Math.random()*e.length)]-1].click()}function T(t){b.classList.remove("results_active"),document.querySelector(".congratulation")&&document.querySelector(".congratulation").remove(),clearInterval(m),u.moves=0,u.minutes=0,u.seconds=0,M.textContent="00:00",$.textContent="Moves: 0",function(t){v=!0;const e=[...document.querySelectorAll(".piece")];for(let n=0;n<20*t;n++)H(e);v=!1}(t),m=setInterval(k,1e3)}function O(t){u.countItems=t,_(u.countItems),function(t){const e=Math.sqrt(t.length);r.length=0;for(let t=1;t<=e;t++){r.push([]);for(let n=1;n<=e;n++)r[t-1].push(n+e*(t-1))}}(s),q()}function k(){u.seconds++,60===u.seconds&&(u.minutes++,u.seconds=0),M.textContent=`${u.minutes.toString().padStart(2,0)}:${u.seconds.toString().padStart(2,0)}`}z(),I(),O(16),b.addEventListener("click",(()=>b.classList.remove("results_active"))),f.addEventListener("click",(e=>{(function(e){const n=e.target.closest(".piece");if(!n||n.classList.contains("prevent-move"))return null;const o=+n.dataset.pieceId;E(o)&&l&&(r[a.y][a.x]=s.length,r[c.y][c.x]=o,q(),v||(u.moves++,$.textContent=`Moves: ${u.moves}`,p&&t.play(),r.join(",")===s.join(",")&&(function(t,e){f.insertAdjacentHTML("afterbegin",`\n      <div class="congratulation">Hooray!<br> You solved the puzzle in ${t} and ${e} moves!</div>\n    `)}(M.textContent,u.moves),function(t){const e={min:t.minutes,sec:t.seconds,moves:t.moves};d.push(e),d.sort(((t,e)=>60*t.min+t.sec-(60*e.min+e.sec))),d=d.slice(0,10),z()}(u),clearInterval(m)))),n.classList.remove("prevent-move"),l=!0})(e),q()})),f.addEventListener("mousedown",(t=>{t.preventDefault();const e=t.target.closest(".piece");if(!e)return null;if(E(+e.dataset.pieceId)){const n=+e.style.transform.match(/\d+/g)[0],s=+e.style.transform.match(/\d+/g)[1],o=t.clientX-n,r=t.clientY-s;let a,c;function u(t){a=t-o,a>n&&a<n+100&&(e.style.transform=`translate(${a}%, ${s}%)`)}function d(t){c=t-r,c>s&&c<s+100&&(e.style.transform=`translate(${n}%, ${c}%)`)}function v(t){var l,v;"left"===i&&(l=t.pageX,a=l-o,a<n&&a>n-100&&(e.style.transform=`translate(${a}%, ${s}%)`)),"right"===i&&u(t.pageX),"up"===i&&(v=t.pageY,c=v-r,c<s&&c>s-100&&(e.style.transform=`translate(${n}%, ${c}%)`)),"down"===i&&d(t.pageY)}e.classList.add("piece_dragged"),e.classList.add("prevent-move"),document.addEventListener("mousemove",v),document.onmouseup=function(){e.classList.remove("piece_dragged"),Math.abs(a-n)>50||Math.abs(c-s)>50?e.classList.remove("prevent-move"):(e.style.transform=`translate(${n}%, ${s}%)`,(a||c)&&(l=!1)),document.removeEventListener("mousemove",v),e.onmouseup=null,e.classList.remove("prevent-move")}}q()})),f.ondragstart=function(){return!1},g.addEventListener("click",(()=>T(u.countItems))),w.addEventListener("click",(t=>{const e=+t.target.value;e&&(O(e),T(u.countItems))})),T(u.countItems),window.addEventListener("load",(()=>{localStorage.getItem("top")&&(d=JSON.parse(localStorage.getItem("top")),z())})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("top",JSON.stringify(d))})),h.addEventListener("click",(function(){localStorage.setItem("savedState",JSON.stringify(u)),localStorage.setItem("savedMatrix",JSON.stringify(r)),localStorage.setItem("top",JSON.stringify(d))})),y.addEventListener("click",(function(){localStorage.getItem("savedState")&&(b.classList.remove("results_active"),u=JSON.parse(localStorage.getItem("savedState")),r=JSON.parse(localStorage.getItem("savedMatrix")),document.querySelector(".congratulation")&&document.querySelector(".congratulation").remove(),clearInterval(m),_(u.countItems),q(),M.textContent=`${u.minutes.toString().padStart(2,0)}:${u.seconds.toString().padStart(2,0)}`,$.textContent=`Moves: ${u.moves}`,m=setInterval(k,1e3),I())})),L.addEventListener("click",(function(){p=!p,L.innerHTML===e()?L.innerHTML=o():L.innerHTML=e()})),S.addEventListener("click",(function(){b.classList.add("results_active")}))}))}()}();